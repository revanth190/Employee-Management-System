{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin-LFI\\\\Downloads\\\\EMSA\\\\EMSA\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [token, setToken] = useState(() => localStorage.getItem('emsa_token'));\n  const [user, setUser] = useState(() => {\n    const savedUser = localStorage.getItem('emsa_user');\n    return savedUser ? JSON.parse(savedUser) : null;\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(false);\n  }, []);\n  const login = authData => {\n    console.log('AuthContext.login received:', authData);\n    const token = authData.token || authData.accessToken;\n    const user = authData.user || {\n      id: authData.accountId,\n      username: authData.username,\n      email: authData.email,\n      fullName: authData.fullName,\n      role: authData.role\n    };\n    console.log('Storing token and user in localStorage, role=', user.role);\n    console.log('Token length:', token ? token.length : 'null');\n    console.log('User object:', JSON.stringify(user));\n    setToken(token);\n    setUser(user);\n    localStorage.setItem('emsa_token', token);\n    localStorage.setItem('emsa_user', JSON.stringify(user));\n    console.log('Stored in localStorage. Check:', {\n      token_stored: !!localStorage.getItem('emsa_token'),\n      user_stored: !!localStorage.getItem('emsa_user'),\n      user_role: localStorage.getItem('emsa_user') ? JSON.parse(localStorage.getItem('emsa_user')).role : 'N/A'\n    });\n  };\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n    localStorage.removeItem('emsa_token');\n    localStorage.removeItem('emsa_user');\n  };\n  const isAdmin = () => (user === null || user === void 0 ? void 0 : user.role) === 'ADMIN';\n  const isManager = () => (user === null || user === void 0 ? void 0 : user.role) === 'MANAGER';\n  const isEmployee = () => (user === null || user === void 0 ? void 0 : user.role) === 'EMPLOYEE';\n  const isUser = () => (user === null || user === void 0 ? void 0 : user.role) === 'USER';\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      token,\n      loading,\n      login,\n      logout,\n      isAdmin,\n      isManager,\n      isEmployee,\n      isUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"J4kOVI9LwcfT5mZgRRBdewQdRak=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","token","setToken","localStorage","getItem","user","setUser","savedUser","JSON","parse","loading","setLoading","login","authData","console","log","accessToken","id","accountId","username","email","fullName","role","length","stringify","setItem","token_stored","user_stored","user_role","logout","removeItem","isAdmin","isManager","isEmployee","isUser","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/Admin-LFI/Downloads/EMSA/EMSA/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst AuthContext = createContext(null);\n\nexport function AuthProvider({ children }) {\n\n  const [token, setToken] = useState(() => localStorage.getItem('emsa_token'));\n\n  const [user, setUser] = useState(() => {\n    const savedUser = localStorage.getItem('emsa_user');\n    return savedUser ? JSON.parse(savedUser) : null;\n  });\n\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setLoading(false);\n  }, []);\n\n  const login = (authData) => {\n    console.log('AuthContext.login received:', authData);\n    const token = authData.token || authData.accessToken;\n    const user = authData.user || {\n      id: authData.accountId,\n      username: authData.username,\n      email: authData.email,\n      fullName: authData.fullName,\n      role: authData.role\n    };\n\n    console.log('Storing token and user in localStorage, role=', user.role);\n    console.log('Token length:', token ? token.length : 'null');\n    console.log('User object:', JSON.stringify(user));\n\n    setToken(token);\n    setUser(user);\n\n    localStorage.setItem('emsa_token', token);\n    localStorage.setItem('emsa_user', JSON.stringify(user));\n    \n    console.log('Stored in localStorage. Check:', {\n      token_stored: !!localStorage.getItem('emsa_token'),\n      user_stored: !!localStorage.getItem('emsa_user'),\n      user_role: localStorage.getItem('emsa_user') ? JSON.parse(localStorage.getItem('emsa_user')).role : 'N/A'\n    });\n  };\n\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n    localStorage.removeItem('emsa_token');\n    localStorage.removeItem('emsa_user');\n  };\n\n  const isAdmin = () => user?.role === 'ADMIN';\n  const isManager = () => user?.role === 'MANAGER';\n  const isEmployee = () => user?.role === 'EMPLOYEE';\n  const isUser = () => user?.role === 'USER';\n\n  return (\n    <AuthContext.Provider value={{ user, token, loading, login, logout, isAdmin, isManager, isEmployee, isUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}